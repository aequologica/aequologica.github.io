<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>Christophe Thiebaud</title>

  <link rel="canonical" href="https://aequologica.net/vinyl/">

  <!-- https://realfavicongenerator.net/favicon_checker -->
  <link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png">
  <link rel="manifest" href="./favicon/site.webmanifest">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">

  <!-- Open Graph data -->
  <meta property="fb:app_id" content="417669389661132" />

  <meta property="og:locale" content="fr_FR">
  <meta property="og:title" content="Thiebaud et al." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://aequologica.net/vinyl/" />
  <meta property="og:description"
    content="J'aimerais bien qu'un jour, tout cela soit enregistré correctement et distribué sur un vinyl. Pour l'instant, ce sont des ébauches approximatives faites à la maison avec un matériel approximatif." />
  <meta property="og:site_name" content="aequologica/vinyl" />

  <meta property="og:image" content="https://aequologica.net/vinyl/thumbnails_dark.jpg" />
  <meta property="og:image:url" content="https://aequologica.net/vinyl/thumbnails_dark.jpg" />
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:image:width" content="2400" />
  <meta property="og:image:height" content="1254" />

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css">

  <style>
    @font-face {
      font-family: 'trirong';
      src: url('Trirong-Regular.woff') format('woff');
    }

    html {
      height: 100%;
      width: 100%;
      background: url(./vinyl.svg) no-repeat center center;
      background-size: contain;
      background-color: #21252C !important;
    }

    body {
      height: 100%;
      width: 100%;
      background-color: transparent !important;
      font-family: "trirong";
    }

    .card {
      background-color: rgba(255, 255, 255, 0.2) !important;
    }

    .card img {
      cursor: pointer;
    }

    .navbar [type="button"] {
      padding: .25rem .75rem;
      border: 1px solid rgba(255, 255, 255, .1);
      border-radius: .25rem;
    }
  </style>

</head>

<body>

  <header style="display:none;">
    <div class="bg-dark collapse" id="navbarHeader">
      <div class="container">
        <div class="row">
          <div class="col-sm-8 col-md-7 py-4">
            <h4 class="text-white">Kézako ?</h4>
            <p class="text-muted">
              J'aimerais bien qu'un jour, tout cela soit enregistré correctement et distribué sur un vinyl. Pour l'instant, ce sont des ébauches approximatives faites à la maison
              avec un matériel approximatif.
            </p>
          </div>
          <div class="col-sm-4 offset-md-1 py-4">
            <h4 class="text-white">Je suis là :</h4>
            <ul class="list-unstyled">
              <li><a href="https://twitter.com/cthiebaud" class="text-white">Twitter</a></li>
              <li><a href="https://www.facebook.com/christophe.thiebaud" class="text-white">Facebook</a></li>
              <li><a href="https://www.instagram.com/cthiebaud/" class="text-white">Instagram</a></li>
              <li><a href=".." class="text-white">Æquologica</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="navbar navbar-dark bg-dark shadow-sm">
      <div class="container">
        <style>
          @media (min-width: 768px) {
            #vinyl_brand::after {
              content: "Thiebaud et al.";
              font-size: 14pt;
              margin-left: .5rem;
            }
          }
        </style>
        <a id="vinyl_brand" class="navbar-brand d-flex align-items-center" style="margin-right:.5rem;" title="Vinyl Title">
          <img src="vinyl_icon.svg">
        </a>
        <a id="vinyl_share" class="btn" type="button" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Faequologica.net%2Fvinyl%2F&amp;src=sdkpreparse"
          target="_facebook" title="Share on Facebook ...">
          <img src="share-svgrepo-com.svg" style="width:30px; height: 30px;">
        </a>
        <button id="shuffle_button" class="btn" type="button">
          <img src="iconfinder_interface-solid-multimedia-shuffle-button_6127262.svg" style="width:30px; height: 30px;" title="Shuffle Songs">
        </button>
        <button id="start_pause_button" class="btn" type="button">
          <img src="iconfinder_music_play_pause_control_go_arrow_1868967.svg" style="width:30px; height: 30px;" title="Start / Stop Vinyl in Background">
        </button>
        <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false"
          aria-label="Toggle navigation" title="Display Info">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
    </div>
  </header>

  <main>

    <div class="album py-5">
      <div class="container">
        <div id="songs" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
        </div>
      </div>
    </div>

  </main>

  <footer class="text-muted py-3"  style="display:none;">
    <div class="container">
      <p class="float-end mb-1">Christophe Thiebaud ℗</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lodash@latest/lodash.min.js"></script>

  <script id="video-template" type="text/x-handlebars-template">
    <iframe 
      id="yt-widget" 
      src="https://www.youtube.com/embed/{{id}}?controls=0&autoplay=1"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture">
    </iframe>
  </script>

  <script id="sound-template" type="text/x-handlebars-template">
    <iframe 
      id="sc-widget" 
      src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/{{id}}&auto_play=true&buying=false&liking=true&download=false&sharing=false&show_artwork=true&show_comments=false&show_playcount=false&show_user=true&hide_related=true&visual=true&callback=true">
    </iframe>
  </script>

  <script id="markdown-template" type="text/x-handlebars-template">
    <iframe 
      id="tx-widget" 
      src="showdown.html?./texts/{{id}}.md">
    </iframe>
  </script>

  <script id="url-template" type="text/x-handlebars-template">
    <iframe 
      id="bs-widget" 
      src="{{id}}">
    </iframe>
  </script>

  <script id="song-template" type="text/x-handlebars-template">
    <div id="{{key}}_" class="col" style="opacity: 0.0;">
      <div id="{{key}}" class="card shadow-sm bg-secondary" style="position: relative;">
        <img class="img-fluid" src="./covers/{{cover}}" alt="">

        <div class="card-body text-light bg-dark"  style="display:none;">
          <p class="card-text" style="font-size: smaller;">{{val.text}}</p>
          <div class="d-flex justify-content-between align-items-center">
            <div class="btn-group">
              {{#each val.watch}}
              <button type="button" id="watch_{{id}}" title="{{title}}" class="vid btn btn-sm btn-outline-secondary" data-id="{{id}}" data-text="watch">watch</button>
              {{/each}}
              {{#each val.listen}}
              <button type="button" id="listen_{{id}}" title="{{title}}" class="sound btn btn-sm btn-outline-secondary" data-id="{{id}}" data-text="listen">listen</button>
              {{/each}}
              {{#if val.markdown}}
              <button type="button" id="read_{{key}}" class="markdown btn btn-sm btn-outline-secondary" data-id="{{key}}" data-text="read">read</button>
              {{/if}}
              {{#if val.url}}
              <button type="button" id="url{{key}}" class="url btn btn-sm btn-outline-secondary" data-id="{{val.url}}" data-text="mise en abyme">mise en abyme</button>
              {{/if}}
            </div>
            <small class="text-muted">{{{val.duration}}}</small>
          </div>
        </div>
      </div>
    </div>
  </script>

  <script type="module">
    import { fadeIn, fadeOut } from "./fadeInFadeOut.js";

    // compile the templates
    const templates = {
      song: undefined,
      video: undefined,
      sound: undefined,
      markdown: undefined,
      url: undefined,
    };

    Object.keys(templates).map(function (key, index) {
      templates[key] = Handlebars.compile(document.getElementById(key + "-template").innerHTML);
    });

    let songs = {
      "bateau": {
        text: "Le Bateau ivre (AR)",
        duration: "6:33",
        watch: [
          {
            url: "https://youtu.be/a3Ek2EYkGsw",
            id: "a3Ek2EYkGsw",
            title: "Christophe Thiebaud @ Hockenheim - lundi 11 juin 2018, 8:20 du matin",
          }
        ],
        listen: [
          {
            url: "https://soundcloud.com/christophe-thiebaud/le-bateau-ivre",
            id: "203852214",
            title: "Christophe Thiebaud @ Seloncourt - 2015",
          },
          {
            url: "https://soundcloud.com/christophe-thiebaud/le-bateau-ivre-1",
            id: "969780100",
            title: "'Sacha Pitoeff' mix - janvier 2021",
          }
        ],
        markdown: "https://www.poetica.fr/poeme-1906/arthur-rimbaud-le-bateau-ivre/",
      },
      "dancing": {
        text: "Socially Distant Dancing",
        duration: "3:49",
        watch: [
          {
            url: "https://youtu.be/K6rk5tG71rI",
            id: "K6rk5tG71rI",
            title: "Mother by Bong Joon-ho (2009) + nième avatar de Matsubaba - 2020",
          }
        ],
        listen: [
          {
            url: "https://soundcloud.com/christophe-thiebaud/matsubaba",
            id: "958856077",
            title: "nième avatar de Matsubaba - 2020",
          }
        ],
      },
      "larme": {
        text: "Larme (AR)",
        duration: "3:47",
        watch: [
          {
            url: "https://youtu.be/Zk_YubAnJmM",
            id: "Zk_YubAnJmM",
            title: "With Flavio Piscopo (percussioni) - 2016",
          }
        ],
        markdown: "https://www.poetica.fr/poeme-899/arthur-rimbaud-larme/",
      },
      "matin": {
        text: "Bonne pensée du matin (AR)",
        duration: "3:17",
        watch: [
          {
            url: "https://youtu.be/KHRBZ7buOFk",
            id: "KHRBZ7buOFk",
            title: "Pendant le premier confinement, sur notre balcon à San Lazzaro di Savena - mai 2020",
          }
        ],
        listen: [
          {
            url: "https://soundcloud.com/christophe-thiebaud/bonne-pensee-du-matin-arthur",
            id: "811632862",
            title: "nième avatar de 'Pray the Lord'",
          }
        ],
        markdown: "https://www.poetica.fr/poeme-646/arthur-rimbaud-bonne-pensee-du-matin/",
      },
      "matsubaba": {
        text: "Matsubaba Cantata",
        duration: "6:08",
        listen: [
          {
            url: "https://soundcloud.com/christophe-thiebaud/matsubaba_cantata",
            id: "962293678",
            title: "Le 'vrai' Matsubaba, dans sa version de 2021",
          }
        ],
      },
      "poux": {
        text: "Les chercheuses de poux (AR)",
        duration: "2:24",
        listen: [
          {
            url: "https://soundcloud.com/christophe-thiebaud/les-chercheuses-de-poux/s-kZTIT",
            id: "262697864%3Fsecret_token%3Ds-kZTIT",
            title: "très brut de fonderie, il faut encore le travailler - 2016",
          }
        ],
        markdown: "https://www.poetica.fr/poeme-138/arthur-rimbaud-les-chercheuses-de-poux/",
      },
      "sensation": {
        text: "Sensation (AR)",
        duration: "5:21",
        watch: [
          {
            url: "https://youtu.be/tkK7Bi7c7Wc",
            id: "tkK7Bi7c7Wc",
            title: "The New World Terrence Malick (2005) - 2021",
          }
        ],
        listen: [
          {
            url: "https://soundcloud.com/christophe-thiebaud/sensation-1",
            id: "970945483",
            title: "2021",
          }
        ],
        markdown: "https://www.poetica.fr/poeme-533/arthur-rimbaud-sensation/",
      },
      "supplique": {
        text: "Supplique Pour Être Enterré À La Plage De Sète (GB)",
        duration: "8:00",
        listen_: [
          {
            url: "https://soundcloud.com/christophe-thiebaud/supplique-pour-etre-enterre-a/s-1ON0iP3KZ2d",
            id: "811603621%3Fsecret_token%3Ds-1ON0iP3KZ2d",
            title: "dans le futur",
          }
        ],
        markdown: "http://www.analysebrassens.com/?page=texte&id=94&%23",
      },
      "tour": {
        text: "Chanson de la plus haute tour (AR)",
        duration: "5:09",
        watch: [
          {
            url: "https://youtu.be/7lKeQ91LtFk",
            id: "7lKeQ91LtFk",
            title: "2021",
          }
        ],
        listen: [
          {
            url: "https://soundcloud.com/christophe-thiebaud/chanson-de-la-plus-haute-tour",
            id: "969542389",
            title: "2021",
          }
        ],
        markdown: "http://courses.logos.it/plscourses/linguistic_resources.laboratorio5?lang=en",
      },
      "brouillard": {
        text: "Psycho Brouillard",
        duration: "3:54",
        watch: [
          {
            url: "https://youtu.be/ehCW0AkOp2Q",
            id: "ehCW0AkOp2Q",
            title: "Alfred Hitchcock, 1960",
          },
          {
            url: "https://youtu.be/wDe2REZxvMo",
            id: "wDe2REZxvMo",
            title: "Gus Van Sant, 1998",
          },
        ],
      },
      "orange2": {
        text: "This page intentionally left orange.",
        extension: ".svg",
        duration: "&infin;",
        url: "/vinyl?no_recursion=true",
      },
      "bwv": {
        text: "Johann Sebastian Bach",
        extension: ".svg",
        duration: "",
        watch: [
          {
            url: "https://youtu.be/p9Cc4amUnHw",
            id: "p9Cc4amUnHw",
            title: "Largo from sonata #3 in C major BWV 1005 for solo violin - 2020",
          },
          {
            url: "https://youtu.be/OHp12oUx81A",
            id: "OHp12oUx81A",
            title: "BWV 1006 (w/o 'a') with some borrowings from BWV 29 - 2020",
          },
          {
            url: "https://youtu.be/UWXZn5jskEM",
            id: "UWXZn5jskEM",
            title: "Goldberg Variations BWV988 - Variatio 18. Canone alla Sexta.",
          },
        ],
      }
    };

    let order = [
      "bateau",
      /* "brouillard", */
      "bwv",
      "dancing",
      "larme",
      /* "matin", */
      "matsubaba",
      /* "orange2",
      "poux",
       *//* "sensation", */
      /* "supplique",
       */"tour",
    ];

    const urlParams = new URLSearchParams(window.location.search);
    const no_recursion = urlParams.get('no_recursion');

    if (no_recursion) {
      const index = order.indexOf("orange2");
      if (index > -1) {
        order.splice(index, 1);
      }
    }

    // http://stackoverflow.com/questions/20789373/shuffle-array-in-ng-repeat-angular
    // -> Fisher–Yates shuffle algorithm
    function shuffleArray(array) {
      var m = array.length, t, i;
      // While there remain elements to shuffle
      while (m) {
        // Pick a remaining element…
        i = Math.floor(Math.random() * m--);
        // And swap it with the current element.
        t = array[m];
        array[m] = array[i];
        array[i] = t;
      }
      return array;
    }

    $(document).ready(function () {

      let $thePlayer = undefined;
      let $theButton = undefined;

      const vynilAnimation = (() => {
        const start = () => {
          $start_pause_button.children('img').attr("src", "iconfinder_music_pause_stop_control_play_1868969.svg");
          $('html').css({
            "background": "url(./vinyl_rotating.svg) no-repeat center center",
            "background-size": "contain",
          });
          return "started";
        };
        const stop = () => {
          $start_pause_button.children('img').attr("src", "iconfinder_music_play_pause_control_go_arrow_1868967.svg");
          $('html').css({
            "background": "url(./vinyl.svg) no-repeat center center",
            "background-size": "contain",
          });
          return "stopped";
        };
        const toggle = () => {
          if ($start_pause_button.children('img').attr("src") == "iconfinder_music_pause_stop_control_play_1868969.svg") {
            return stop();
          } else {
            return start();
          }
        };
        return {
          start: start,
          stop: stop,
          toggle: toggle,
        }
      })();

      //  destroy if exists
      function destroyiframeIfExists($button) {
        if ($thePlayer) {
          $thePlayer.remove();
          $thePlayer = undefined;
        }
        if ($theButton) {
          $theButton.html($theButton.data("text"));
          if (!$button || $theButton.prop('id') === $button.prop('id')) {
            $theButton = undefined;
            return undefined;
          }
        }
        if ($button) {
          $button.html("<span style='color:lightblue'>close ×</span>");
        }
        return $button;
      }

      function getStyleAndParentCard($button) {
        const $parentCard = $button.parents('div.card');
        const $img = $parentCard.children('img');
        const oh = $img.outerHeight(true) + 1;
        const ow = $img.outerWidth(true) + 1;

        return {
          style: {
            position: "absolute",
            top: 0,
            left: 0,
            width: ow + "px",
            height: oh + "px",
            "background-color": "transparent",
          },
          $parentCard: $parentCard,
        };
      }

      function showiframe(e, template) {
        e.preventDefault();
        e.stopPropagation();

        // destroy
        vynilAnimation.stop();
        $theButton = destroyiframeIfExists($(e.currentTarget));

        if ($theButton) {
          // create
          if ($theButton.attr("class").indexOf("sound") != -1) {
            vynilAnimation.start();
          }
          const styleAndParentCard = getStyleAndParentCard($theButton);
          const iframe = template({
            id: $theButton.data('id'),
          });
          $thePlayer = $(iframe);
          styleAndParentCard.$parentCard.append($thePlayer.css(styleAndParentCard.style));
        }
      }

      function addEventHandlers() {
        $('div.card img.img-fluid').on('click', e => {
          e.preventDefault();
          e.stopPropagation();
          $(e.currentTarget).parent().find('.btn-group button:first-child').trigger("click");
        });

        $('div.card button.vid').on('click', e => showiframe(e, templates.video));
        $('div.card button.sound').on('click', e => showiframe(e, templates.sound));
        $('div.card button.markdown').on('click', e => showiframe(e, templates.markdown));
        $('div.card button.url').on('click', e => showiframe(e, templates.url));
      }

      function insertCards($parent) {

        const shuffle = shuffleArray([...order]);

        shuffle.forEach(key => {
          $parent.append($(templates.song({
            key: key,
            val: songs[key],
            cover: () => {
              if (songs[key].extension) {
                return key + songs[key].extension;
              }
              if (key == "brouillard") {
                const random_boolean = Math.random() < 0.5;
                if (random_boolean) {
                  return "psycho_I.jpg";
                } else {
                  return "psycho_II.jpg";
                }
              }
              return key + ".jpg"
            }
          })));
        });

        addEventHandlers();
      }

      const $row = $('#songs');
      insertCards($row);
      fadeIn($row.children(".col"), 111, () => { });

      $('#shuffle_button').on('click', e => {
        e.preventDefault();
        e.stopPropagation();
        fadeOut($row.children(".col"), 333, () => {
          $row.empty();
          insertCards($row);
          fadeIn($row.children(".col"), 666, () => { }, shuffleArray);
        });
      });

      const $start_pause_button = $('#start_pause_button');
      $start_pause_button.on('click', e => {
        e.preventDefault();
        e.stopPropagation();

        if ("stopped" == vynilAnimation.toggle()) {
          /* destroyiframeIfExists(); */
        }
      });

    });

  </script>

</html>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BL5M1EJEW0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-BL5M1EJEW0');
</script>